
'ocr\A_README.txt
'Original Release, Junwu Ma,  Dec 22, 2009
'Updated, Carl Nagle, Jan 08, 2010
'Updated, JunwuMa, Jan 19, 2010    Added trainGOCR.bat (require JAI imageio installed) for GOCR training; remove DJPEG.EXE out for not using it in updated SAFS code.
'                                  Compressed JPG usually has noisy points in it.  These noisy points lower GOCR's accuracy.
'Updated, JunwuMa, Jan 27, 2010    Add tesseract.exe (released by Tesseract) for accuracy, abandon using tessdllWrapper.dll/tessdll.dll.  
'Updated, JunwuMa, Mar 31, 2010    Add SafsTessdll.exe (released by SAFS) that makes it work to locate text area according to the text in image.  
'Updated, LeiWang, May 14, 2010    Some executable files are moved to c:/safs/bin/.
'Updated, CANAGL,  Oct 22, 2010    Corrected some command-line execution documentation.

Assets for SAFS IBT OCR:

FILE                                   PURPOSE
=============================          =============================================================================
A_README.txt                           This README file.
setOCREnv.wsf                          Set enviornment variables for SAFS using Tesseract-OCR and GOCR.

sample75dpi.bmp                        A bmp image captured on screen in 75DPI.
sample300dpi.tif                       A tif image scanned in 300DPI. [parameter2] should be set to 1 when converting this image. 

.\tessdata                             Subfolder that stores various language data for Tesseract OCR.
.\gocrdata                             Subfolder (created by setGOCREnv.wsf) that stores training data for GOCR.
    *******************************************************
    * The following executables are moved to c:/safs/bin/ *
    *******************************************************
tesseract.exe                          Tesseract's executable file for SAFS to call. 

tessdll.dll	                           Used by tessdllWrapper.dll and SafsTessdll.exe. Contains core procedures deployed by Tesseract OCR. 
                                       http://code.google.com/p/tesseract-ocr/
tessdllWrapper.dll(deprecated)         Used by SAFS as an interface to Tesseract OCR engine.

SafsTessdll.exe                        The executable file to detect text and coordinates from image. Generated by SAFS.

gocr.exe                               The executable command for GOCR (jocr.sourceforge.net). See its help by "gocr.exe -h".
                                       Only PBM/PGM/PPM can be directly opened by it.
                                       If you want gocr.exe to work with an image like JPG,GIF,TIF..., a corresponding
                                       third-party software is needed. The software converts the image to PBM/PGM/PPM at first,
                                       then GOCR can open the converted image.
                                       
                                       When use GOCR to process an image, SAFS converts it to a temporary JPG file at first,  
                                       then the temporary JPG can be used by gocr.exe with the help of "djpeg.exe".
                                       
trainGOCR.bat                          Bat file for gocr training. Using: "trainGOCR unknowImg.gif"  

vcredist_x86.exe                       Visual Studio Redistributable Install EXE (for tessdll.dll)
=============================          ==============================================================================


STEPS for SAFS to use OCR: (Suppose SAFS has been already installed on your machine)
**************************************************************************
* These steps are deprecated, as SetupSAFS.wsf will automatically do it. *
**************************************************************************
=======================================================================================
1) If not present, create a folder for OCR: C:\SAFS\ocr  (default)
2) If necessary, copy any DLL, EXE and BAT files listed above to C:\SAFS\bin
3) If necessary, copy all other files listed above to C:\SAFS\OCR
4) Double click setOCREnv.wsf in C:\SAFS\OCR. "Building OCR environment finished" pops up if success.

EXAMPLES
=======================================================================================
After finish above steps, you may use a command line to convert an image file with 'clean' background and only text in it.
CD C:\SAFS\OCR
C:\SAFS\OCR>java org.safs.tools.ocr.tesseract.TesseractOCREngine sample75dpi.bmp

Output:  "image converted to: SAS Enterprise Guide"


Command line for using Tesseract OCR:
======================================
java org.safs.tools.ocr.tesseract.TesseractOCREngine imageFile [-z zoom] [-l lang] [-t text]

imageFile: Required. 
           An image file as source with formats: BMP,GIF,JPEG,PNG and TIFF.

[-z zoom]: Optional.
           Float, it is an optional parameter representing zoom value.   http://tiporama.com/tools/pixels_inches.html
           SAFS uses a simple way -- resizing the image to fit 300DPI that is required by OCR for better text recognition.  
           Normal screen-captured images are at low DPI-- (75~90).
           Value between 0 and 1, stands for the size of zooming out the source image to fit Tesseract's requirement.
           Value bigger than 1, stands for the size of zooming in the source image to fit Tesseract's requirement.
           User may give a proper zoom value for the text in a image to be fit in and recognized. 
              
           If no zoom value is specified, TesseractOCREngine takes ~2.0 as default, since 2.0 preforms ok with normal screen-captured images.
           If your image is 300DPI like sample300dpi.tif, paramter2 should be set to 1. 

[-l lang]  Optional.
           A valid ISO Language Code--a lowercase ISO 639 code. 
           Example, "en" for English, which is the default.
           
[-t text]  Optional.
           Specific text to locate in the imageFile.


Command line for Using GOCR:
======================================
java org.safs.tools.ocr.gocr.GOCREngine [parameter1] [parameter2]

[parameter1]: an image file as source with formats: BMP,GIF,JPEG,PNG and TIFF.

[parameter2]: Float, it is an optional parameter representing zoom value.
              SAFS uses a simple way -- resizing the image to fit 300DPI that is required by OCR for better text recognition.  
              Normal screen-captured images are at low DPI-- (75~90).
              A value between 0 and 1, stands for the size of zooming out the source image to fit 300DPI for text recognition.
              A value bigger than 1, stands for the size of zooming in the source image to fit GOCR's requirement.
              User may give a proper zoom value for the text in a image to be fit in and recognized. 
              
              If no paramter2 input, GOCREngine takes 1.5 as default, since it seems 1.5 preforms ok with normal screen-captured images.
							If your image is 300DPI like sample300dpi.tif, paramter2 should be set to 1. 	


Commands with self-defined zoom value:
c:\anyfolder>java org.safs.tools.ocr.tesseract.TesseractOCREngine sample75dpi.bmp 1.8

c:\anyfolder>java org.safs.tools.ocr.gocr.GOCREngine sample300dpi.tif 1

Training GOCR:
======================================
trainGOCR.bat <imagefile>

In training process, every unrecognized letter will be displayed on screen and highlighted with '#', waiting for
correct input. User should input the corresponding letters according to what the highlighted area looks like. 
  
For example:
     
  #####   
    #                ---> User should input T to continue until training finished
    #   
    #
